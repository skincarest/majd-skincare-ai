
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨Ø´Ø±Ø© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f9f9f9;
            text-align: right;
            padding: 20px;
            direction: rtl;
        }
        h1 {
            color: #333;
        }
        form {
            margin-bottom: 20px;
        }
        input[type="file"] {
            margin: 10px 0;
        }
        #results {
            background-color: #fff;
            border: 1px solid #ccc;
            padding: 15px;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <h1>ğŸ§´ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨Ø´Ø±Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</h1>
    <form id="skinForm" enctype="multipart/form-data" method="POST" action="#">
        <label for="selfie">ğŸ“· Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ ØµÙˆØ±Ø© ÙˆØ¬Ù‡Ùƒ:</label><br>
        <input type="file" id="selfie" name="image" accept="image/*" required><br>
        <button type="submit">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ­Ù„ÙŠÙ„</button>
    </form>
    <div id="results">Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§...</div>

    <script>
    document.getElementById("skinForm").addEventListener("submit", async function(e) {
        e.preventDefault();

        const fileInput = document.getElementById("selfie");
        const file = fileInput.files[0];
        if (!file) {
            alert("ÙŠØ±Ø¬Ù‰ ØªØ­Ù…ÙŠÙ„ ØµÙˆØ±Ø©.");
            return;
        }

        const formData = new FormData();
        formData.append("image", file);

        try {
            const response = await fetch("https://api.perfectcorp.com/skin-analysis", {
                method: "POST",
                headers: {
                    "Authorization": "Bearer eXFUVW0kpTQ1iX8bsxDKLRp8td2xoFNd"
                },
                body: formData
            });

            if (!response.ok) {
                throw new Error("ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª.");
            }

            const result = await response.json();
            const output = formatResults(result);
            document.getElementById("results").innerHTML = output;
        } catch (error) {
            document.getElementById("results").innerText = "Ø­Ø¯Ø« Ø®Ø·Ø£: " + error.message;
        }
    });

    function formatResults(data) {
        // This function should be customized based on the actual API response structure
        let html = "<h2>ğŸ§´ Ù†ØªØ§Ø¦Ø¬ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨Ø´Ø±Ø©</h2>";
        if (data.conditions) {
            data.conditions.forEach(cond => {
                html += `<h3>${cond.name_ar}</h3>`;
                html += `<p>Ø¯Ø±Ø¬Ø© Ø§Ù„Ø´Ø¯Ø©: ${cond.severity}</p>`;
                html += `<p>Ø§Ù„ØªÙˆØµÙŠØ©: ${cond.recommendation_ar}</p>`;
            });
        } else {
            html += "<p>Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬.</p>";
        }
        return html;
    }
    </script>
</body>
</html>
