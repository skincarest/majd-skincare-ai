
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>تحليل البشرة بالذكاء الاصطناعي</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f9f9f9;
            text-align: right;
            padding: 20px;
            direction: rtl;
        }
        h1 {
            color: #333;
        }
        form {
            margin-bottom: 20px;
        }
        input[type="file"] {
            margin: 10px 0;
        }
        #results {
            background-color: #fff;
            border: 1px solid #ccc;
            padding: 15px;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <h1>🧴 تحليل البشرة باستخدام الذكاء الاصطناعي</h1>
    <form id="skinForm" enctype="multipart/form-data" method="POST" action="#">
        <label for="selfie">📷 الرجاء تحميل صورة وجهك:</label><br>
        <input type="file" id="selfie" name="image" accept="image/*" required><br>
        <button type="submit">ابدأ التحليل</button>
    </form>
    <div id="results">نتائج التحليل ستظهر هنا...</div>

    <script>
    document.getElementById("skinForm").addEventListener("submit", async function(e) {
        e.preventDefault();

        const fileInput = document.getElementById("selfie");
        const file = fileInput.files[0];
        if (!file) {
            alert("يرجى تحميل صورة.");
            return;
        }

        const formData = new FormData();
        formData.append("image", file);

        try {
            const response = await fetch("https://api.perfectcorp.com/skin-analysis", {
                method: "POST",
                headers: {
                    "Authorization": "Bearer eXFUVW0kpTQ1iX8bsxDKLRp8td2xoFNd"
                },
                body: formData
            });

            if (!response.ok) {
                throw new Error("فشل الاتصال بواجهة برمجة التطبيقات.");
            }

            const result = await response.json();
            const output = formatResults(result);
            document.getElementById("results").innerHTML = output;
        } catch (error) {
            document.getElementById("results").innerText = "حدث خطأ: " + error.message;
        }
    });

    function formatResults(data) {
        // This function should be customized based on the actual API response structure
        let html = "<h2>🧴 نتائج تحليل البشرة</h2>";
        if (data.conditions) {
            data.conditions.forEach(cond => {
                html += `<h3>${cond.name_ar}</h3>`;
                html += `<p>درجة الشدة: ${cond.severity}</p>`;
                html += `<p>التوصية: ${cond.recommendation_ar}</p>`;
            });
        } else {
            html += "<p>لم يتم العثور على نتائج.</p>";
        }
        return html;
    }
    </script>
</body>
</html>
